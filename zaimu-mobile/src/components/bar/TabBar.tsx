import React from 'react';
import {StyleSheet, TouchableOpacity, View, Text, Image} from "react-native";
import { BottomTabBarProps } from '@react-navigation/bottom-tabs';
import * as Haptics from 'expo-haptics';
import colors from "@/src/themes/colors";
import {spacing} from "@/src/themes/dimensions";
import Svg, {Path} from "react-native-svg";

export default function TabBar({ state, descriptors, navigation }: BottomTabBarProps) {
    return(
        <View style={styles.container}>
            {state.routes.map((route, index) => {
                const { options } = descriptors[route.key];
                const isFocused = state.index === index;

                const onPress = () => {
                    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);

                    const event = navigation.emit({
                        type: 'tabPress',
                        target: route.key,
                        canPreventDefault: true,
                    });

                    if (!isFocused && !event.defaultPrevented) {
                        navigation.navigate(route.name);
                    }
                };

                return (
                        <TouchableOpacity
                            key={route.key}
                            onPress={onPress}
                            style={{ alignItems: 'center', justifyContent: 'center' }}
                        >
                            {!isFocused && (
                                <Svg width={spacing.xx} height={spacing.xx} viewBox="0 0 24 24" fill="none">
                                    <Path
                                        d={route.name === 'Home' && (
                                                "M8.707 1.49982C8.51947 1.31235 8.26516 1.20703 8 1.20703C7.73483 1.20703 7.48053 1.31235 7.293 1.49982L0.645998 8.14582C0.59951 8.19231 0.562634 8.24749 0.537475 8.30823C0.512316 8.36897 0.499367 8.43407 0.499367 8.49982C0.499367 8.56556 0.512316 8.63066 0.537475 8.6914C0.562634 8.75214 0.59951 8.80733 0.645998 8.85382C0.739885 8.9477 0.867223 9.00045 0.999998 9.00045C1.06574 9.00045 1.13084 8.9875 1.19158 8.96234C1.25232 8.93718 1.30751 8.90031 1.354 8.85382L2 8.20682V13.4998C2 13.8976 2.15803 14.2792 2.43934 14.5605C2.72064 14.8418 3.10217 14.9998 3.5 14.9998H12.5C12.8978 14.9998 13.2794 14.8418 13.5607 14.5605C13.842 14.2792 14 13.8976 14 13.4998V8.20682L14.646 8.85382C14.7399 8.9477 14.8672 9.00045 15 9.00045C15.1328 9.00045 15.2601 8.9477 15.354 8.85382C15.4479 8.75993 15.5006 8.63259 15.5006 8.49982C15.5006 8.36704 15.4479 8.2397 15.354 8.14582L13 5.79282V2.49982C13 2.36721 12.9473 2.24003 12.8536 2.14626C12.7598 2.0525 12.6326 1.99982 12.5 1.99982H11.5C11.3674 1.99982 11.2402 2.0525 11.1464 2.14626C11.0527 2.24003 11 2.36721 11 2.49982V3.79282L8.707 1.49982ZM13 7.20682V13.4998C13 13.6324 12.9473 13.7596 12.8536 13.8534C12.7598 13.9471 12.6326 13.9998 12.5 13.9998H3.5C3.36739 13.9998 3.24021 13.9471 3.14645 13.8534C3.05268 13.7596 3 13.6324 3 13.4998V7.20682L8 2.20682L13 7.20682Z"
                                            )
                                            || route.name === 'Transactions' && (
                                                "M12.136 0.326086C12.3571 0.270789 12.5878 0.266584 12.8107 0.313789C13.0337 0.360994 13.2429 0.458369 13.4226 0.598521C13.6023 0.738673 13.7476 0.917919 13.8477 1.12265C13.9477 1.32738 13.9998 1.55222 14 1.78009V3.00009H14.5C14.8978 3.00009 15.2794 3.15812 15.5607 3.43943C15.842 3.72073 16 4.10226 16 4.50009V13.5001C16 13.8979 15.842 14.2794 15.5607 14.5607C15.2794 14.8421 14.8978 15.0001 14.5 15.0001H1.5C1.10218 15.0001 0.720644 14.8421 0.43934 14.5607C0.158035 14.2794 9.80916e-08 13.8979 9.80916e-08 13.5001V4.50009C-0.000139461 4.11394 0.148642 3.74261 0.415377 3.4634C0.682113 3.18418 1.04625 3.01859 1.432 3.00109L12.136 0.326086ZM5.562 3.00009H13V1.78009C12.9998 1.70422 12.9824 1.62939 12.949 1.56126C12.9156 1.49313 12.8672 1.43349 12.8074 1.38686C12.7475 1.34022 12.6779 1.30781 12.6036 1.29208C12.5294 1.27636 12.4526 1.27773 12.379 1.29609L5.562 3.00009ZM1.5 4.00009C1.36739 4.00009 1.24021 4.05276 1.14645 4.14653C1.05268 4.2403 1 4.36748 1 4.50009V13.5001C1 13.6327 1.05268 13.7599 1.14645 13.8536C1.24021 13.9474 1.36739 14.0001 1.5 14.0001H14.5C14.6326 14.0001 14.7598 13.9474 14.8536 13.8536C14.9473 13.7599 15 13.6327 15 13.5001V4.50009C15 4.36748 14.9473 4.2403 14.8536 4.14653C14.7598 4.05276 14.6326 4.00009 14.5 4.00009H1.5Z"
                                            )
                                            || ""}
                                        fill={colors.greyMiddle}
                                    />
                                </Svg>
                            )}

                            {isFocused && (
                                <Svg width={spacing.xx} height={spacing.xx} viewBox="0 0 24 24" fill="none">
                                    <Path
                                        d={route.name === 'Home' && (
                                                "M8.707 1.49982C8.51947 1.31235 8.26516 1.20703 8 1.20703C7.73483 1.20703 7.48053 1.31235 7.293 1.49982L0.645998 8.14582C0.59951 8.19231 0.562634 8.24749 0.537475 8.30823C0.512316 8.36897 0.499367 8.43407 0.499367 8.49982C0.499367 8.56556 0.512316 8.63066 0.537475 8.6914C0.562634 8.75214 0.59951 8.80733 0.645998 8.85382C0.739885 8.9477 0.867223 9.00045 0.999998 9.00045C1.06574 9.00045 1.13084 8.9875 1.19158 8.96234C1.25232 8.93718 1.30751 8.90031 1.354 8.85382L8 2.20682L14.646 8.85382C14.7399 8.9477 14.8672 9.00045 15 9.00045C15.1328 9.00045 15.2601 8.9477 15.354 8.85382C15.4479 8.75993 15.5006 8.63259 15.5006 8.49982C15.5006 8.36704 15.4479 8.2397 15.354 8.14582L13 5.79282V2.49982C13 2.36721 12.9473 2.24003 12.8536 2.14626C12.7598 2.0525 12.6326 1.99982 12.5 1.99982H11.5C11.3674 1.99982 11.2402 2.0525 11.1464 2.14626C11.0527 2.24003 11 2.36721 11 2.49982V3.79282L8.707 1.49982Z M8 3.29297L14 9.29297V13.5C14 13.8978 13.842 14.2793 13.5607 14.5606C13.2794 14.8419 12.8978 15 12.5 15H3.5C3.10218 15 2.72064 14.8419 2.43934 14.5606C2.15804 14.2793 2 13.8978 2 13.5V9.29297L8 3.29297Z"
                                            )
                                            || route.name === 'Transactions' && (
                                                "M12.136 0.326086C12.3571 0.270789 12.5878 0.266584 12.8107 0.313789C13.0337 0.360994 13.2429 0.458369 13.4226 0.598521C13.6023 0.738673 13.7476 0.917919 13.8477 1.12265C13.9477 1.32738 13.9998 1.55222 14 1.78009V3.00009H14.5C14.8978 3.00009 15.2794 3.15812 15.5607 3.43943C15.842 3.72073 16 4.10226 16 4.50009V13.5001C16 13.8979 15.842 14.2794 15.5607 14.5607C15.2794 14.8421 14.8978 15.0001 14.5 15.0001H1.5C1.10218 15.0001 0.720644 14.8421 0.43934 14.5607C0.158035 14.2794 9.80916e-08 13.8979 9.80916e-08 13.5001V4.50009C-0.000139461 4.11394 0.148642 3.74261 0.415377 3.4634C0.682113 3.18418 1.04625 3.01859 1.432 3.00109L12.136 0.326086ZM5.562 3.00009H13V1.78009C12.9998 1.70422 12.9824 1.62939 12.949 1.56126C12.9156 1.49313 12.8672 1.43349 12.8074 1.38686C12.7475 1.34022 12.6779 1.30781 12.6036 1.29208C12.5294 1.27636 12.4526 1.27773 12.379 1.29609L5.562 3.00009ZM1.5 4.00009C1.36739 4.00009 1.24021 4.05276 1.14645 4.14653C1.05268 4.2403 1 4.36748 1 4.50009V13.5001C1 13.6327 1.05268 13.7599 1.14645 13.8536C1.24021 13.9474 1.36739 14.0001 1.5 14.0001H14.5C14.6326 14.0001 14.7598 13.9474 14.8536 13.8536C14.9473 13.7599 15 13.6327 15 13.5001V4.50009C15 4.36748 14.9473 4.2403 14.8536 4.14653C14.7598 4.05276 14.6326 4.00009 14.5 4.00009H1.5Z M4 4H15V15H1V4Z"
                                            )
                                            || ""}
                                        fill={colors.black}

                                    />

                                </Svg>
                                )}
                        </TouchableOpacity>
                );
            })}
        </View>
    );
}

const styles = StyleSheet.create({
    container: {
        backgroundColor: colors.white,
        flexDirection: 'row',
        height: 80,
        alignItems: "center",
        justifyContent: "space-around",
        borderTopWidth: 0.4,
        paddingBottom: spacing.lg
    },
    icons: {
        width: spacing.lg,
        height: spacing.lg,
    }
})